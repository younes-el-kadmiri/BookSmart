{% extends "base.html" %}
{% block title %}Inscription - Bib Readers{% endblock %}
{% block content %}
<section class="hero">
  <h1>Inscription</h1>
  <p class="muted">Rejoins la bibliothèque en quelques secondes.</p>
</section>

<div class="card" style="max-width:520px">
  <div class="row">
    <input id="nom" class="input" placeholder="Nom">
    <input id="prenom" class="input" placeholder="Prénom">
  </div>
  <div class="row">
    <input id="email" class="input" placeholder="Email">
    <input id="password" type="password" class="input" placeholder="Mot de passe">
  </div>
  <div class="row" style="margin-top:.6rem">
    <button class="btn ok" onclick="register()">Créer mon compte</button>
  </div>
</div>
{% endblock %}
{% block scripts %}
<script>
async function register(){
  const payload = {
    nom: document.getElementById('nom').value.trim(),
    prenom: document.getElementById('prenom').value.trim(),
    email: document.getElementById('email').value.trim(),
    password: document.getElementById('password').value.trim(),
  };
  if(!payload.nom || !payload.prenom || !payload.email || !payload.password){
    alert("Tous les champs sont requis."); return;
  }
  // Exemple avec /adherents (adapte selon ton schéma Pydantic)
  try{
    const r = await fetch('/adherents/',{
      method:'POST', headers:{'Content-Type':'application/json'}, body:JSON.stringify(payload)
    });
    if(!r.ok) throw new Error(await r.text());
    alert('Compte créé ✅');
    location.href = '/login.html';
  }catch(e){ alert("Erreur: "+e.message); }
}
</script>
{% endblock %}
